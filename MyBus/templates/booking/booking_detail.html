{% extends 'base/base.html' %}
{% load static %}

{% block content %}

<div class="container my-4">
    <div class="card shadow-lg p-4 rounded-3">
        
        <!-- Ticket Header -->
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h3 class="m-0">üéüÔ∏è Ticket Details</h3>
            <span class="badge 
                {% if booking.payment_status == 'paid' %} bg-success 
                {% elif booking.payment_status == 'pending' %} bg-warning 
                {% else %} bg-danger {% endif %} px-3 py-2">
                {{ booking.payment_status|title }}
            </span>
        </div>

        <p class="text-muted mb-1">Ticket No: <strong>#{{ booking.id }}</strong></p>
        <p class="text-muted">Booked On: {{ booking.booked_at|date:"d M Y, h:i A" }}</p>

        <hr>

        <!-- Journey Details -->
        <h5 class="fw-bold mb-3">üöå Journey Information</h5>
        <div class="row mb-3">
            <div class="col-md-6">
                <p><strong>From:</strong> {{ booking.schedule.route.source.city }} ({{ booking.schedule.route.source.name }})</p>
                <p><strong>To:</strong> {{ booking.schedule.route.destination.city }} ({{ booking.schedule.route.destination.name }})</p>
                <p><strong>Distance:</strong> {{ booking.schedule.route.distance }} km</p>
            </div>
            <div class="col-md-6">
                <p><strong>Travel Date:</strong> {{ booking.schedule.date }}</p>
                <p><strong>Time:</strong> {{ booking.schedule.arrival_time }} - {{ booking.schedule.departure_time }}</p>
            </div>
        </div>

        <hr>

        <!-- Bus Details -->
        <h5 class="fw-bold mb-3">üöê Bus Information</h5>
        <p><strong>Bus Name:</strong> {{ booking.schedule.bus.name }}</p>
        <p><strong>Registration No:</strong> {{ booking.schedule.bus.reg_no }}</p>
        <p><strong>Category:</strong> {{ booking.schedule.bus.Category|capfirst }}</p>

        <hr>

        <!-- Seats -->
        <h5 class="fw-bold mb-3">üí∫ Seats Booked</h5>
        <p>
            {% for seat in booking.seat_bookings.all %}
                <span class="badge bg-primary me-1 p-2">Seat {{ seat.seat.id }}</span>
            {% endfor %}
        </p>

        <hr>

        <!-- Fare -->
        <h5 class="fw-bold mb-2">üí∞ Fare Details</h5>
        <div class="d-flex justify-content-between">
            <span>Ticket Price (per seat):</span>
            <span>‚Çπ{{ booking.schedule.price }}</span>
        </div>
        <div class="d-flex justify-content-between">
            <span>Total Seats:</span>
            <span>{{ booking.seat_bookings.count }}</span>
        </div>
        <div class="d-flex justify-content-between fs-5 fw-bold mt-2">
            <span>Total Paid:</span>
            <span>‚Çπ{{ booking.total_amount }}</span>
        </div>

        <hr>

        <!-- Actions -->
        <div class="mt-4 d-flex justify-content-between">
            <a href="{% url 'booking:bookings' %}" class="btn btn-outline-primary">‚¨Ö Back to My Bookings</a>

          
        </div>

    </div>
</div>

{% endblock %}
