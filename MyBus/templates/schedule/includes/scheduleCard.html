{% load static %}

<div class="col-12 col-md-4 mb-3">
  <div class="card h-100 shadow-lg bus-card">
    <div class="row g-0">

      <!-- Image -->
      <div class="col-md-4 d-flex align-items-center justify-content-center">
        <div class="p-2">
          <img src="{{ schedule.route.destination.image.url }}"
               class="img-fluid rounded shadow"
               alt="{{ schedule.route.source.name }}"
               style="width: 100%; height: 120px; object-fit: cover;">
        </div>
      </div>

      <!-- Schedule Info -->
      <div class="col-md-8">
        <div class="card-body text-center">

          <h5 class="card-title mb-2">{{ schedule.bus.reg_no }}</h5>

          <h6 class="fw-bold mb-1">
            {{ schedule.route.source.city|capfirst }} → {{ schedule.route.destination.city|capfirst }}
          </h6>

          <p class="text-muted mb-2">{{ schedule.route.distance }} km</p>

          <h6 class="fw-bold mb-1">
            {{ schedule.departure_time }} - {{ schedule.arrival_time }}
          </h6>

          <p class="text-muted mb-1">Date: {{ schedule.date }}</p>
          <p class="text-muted mb-1">Ticket: ₹{{ schedule.price }}</p>

          <div class="mt-3 d-flex gap-2 justify-content-center">
            {% if user.is_staff %}
              <a href="{% url 'edit_schedule' schedule.id %}" class="btn btn-info btn-sm">
                <i class="bi bi-pencil-square"></i>
              </a>
              <a href="{% url 'del_schedule' schedule.id %}" class="btn btn-danger btn-sm">
                <i class="bi bi-trash"></i>
              </a>
            {% else %}
              <a href="{% url 'booking:seat_selection' schedule.id %}" class="btn btn-success btn-sm">
                Book Now
              </a>
            {% endif %}
          </div>

        </div>
      </div>

    </div>
  </div>
</div>
